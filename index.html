<!DOCTYPE html>
<meta charset="utf-8">
<head>
<style>

    /* CSS goes here. */
.subunit.JPB { fill: #FFFF00; }  /* "name": "Bonin Is." */
.subunit.JPH { fill: #87CEFA; }  /* "name": "Honshu"  */
.subunit.JPI { fill: #00ff00; }  /* "name": "Izu-shoto" */
.subunit.JPK { fill: #98FB98; }  /* "name": "Hokkaido" */
.subunit.JPO { fill: #0000FF; }  /* "name": "Nansei-shoto" */
.subunit.JPS { fill: #C0C0C0; }  /* "name": "Shikoku" */
.subunit.JPV { fill: #FF0000; }  /* "name": "Volcano Is." */
.subunit.JPX { fill: #EE82EE; }  /* "name": "Japan" (others)*/
.subunit.JPY { fill: #EEE8AA; }  /* "name": "Kyushu" */

</style>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v0.min.js"></script>
<script src="jpn_prefectures_meta_data.js"></script>
</head>
<body>
<script>
$(document).ready(function(){
    /* JavaScript goes here. */
    var width = 1160,
    height = 960;
    var projection = d3.geo.albers()
    .center([-10, 35.4])
    .rotate([210, 0])
    .parallels([50, 60])
    .scale(480 * 5)
    .translate([width / 2, height / 2]);
    var path = d3.geo.path()
    .projection(projection);

    var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

    d3.json("jpn_topo_with_meta_data.json", function(error, jpn) {
        svg.selectAll(".subunit")
        .data(topojson.object(jpn, jpn.objects.japan).geometries)
        .enter().append("path")
        .attr("class", function(d,i) { return "subunit "+prefectures_data.prefectures[i].iso; })
        .attr("id", function(d,i) { return prefectures_data.prefectures[i].iso; })
        .attr("d", path);
    });
});
</script>
</body>
</html>
